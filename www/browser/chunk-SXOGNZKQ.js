import{C as l,b as y,d,e as F,f as x,g as C,h as I,i as w,j as D,k as E,o as N,p as j,q as _,r as k,s as G,t as L,v as R,y as B}from"./chunk-DQZ5ZIF4.js";import{i as S,l as M}from"./chunk-MIGXF66M.js";import"./chunk-XAZLOLJU.js";import{Bb as v,Na as s,Oa as n,Xb as b,ba as f,db as u,ea as p,jb as o,kb as r,lb as g,ob as h,xb as m}from"./chunk-I4CLK6SC.js";var Z=(()=>{class a{constructor(e,t,i){this.fb=e,this.router=t,this.authService=i,this.form=this.fb.group({email:["",[d.required,d.email]]}),this.dialog=f(B)}onSubmit(){if(this.form.invalid)return;let e=this.form.value.email;this.authService.checkUserExists(e).then(t=>{t?this.login(e):this.dialog.open(l,{data:{type:"confirm",title:"Usuario no encontrado",message:`\xBFDeseas crear una cuenta con el correo "${e}"?`}}).afterClosed().subscribe(c=>{c&&this.login(e)})}).catch(()=>{this.dialog.open(l,{data:{type:"ok",title:"Error",message:"No se pudo validar el correo. Intenta m\xE1s tarde."}})})}login(e){this.authService.login(e).then(()=>{this.router.navigate(["/tasks"])}).catch(()=>{this.dialog.open(l,{data:{type:"ok",title:"Error",message:"Hubo un error al iniciar sesi\xF3n."}})})}static{this.\u0275fac=function(t){return new(t||a)(n(D),n(S),n(M))}}static{this.\u0275cmp=p({type:a,selectors:[["app-login"]],standalone:!0,features:[v],decls:11,vars:2,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-gray-100","p-4"],[1,"bg-white","p-6","rounded-2xl","shadow-lg","w-full","max-w-md"],[1,"text-2xl","font-bold","mb-4","text-center"],[1,"flex","flex-col","gap-4",3,"ngSubmit","formGroup"],[1,"w-full"],["matInput","","formControlName","email","type","email"],["mat-flat-button","","color","primary","type","submit",1,"w-full",3,"disabled"]],template:function(t,i){t&1&&(o(0,"div",0)(1,"div",1)(2,"h1",2),m(3,"Iniciar Sesi\xF3n"),r(),o(4,"form",3),h("ngSubmit",function(){return i.onSubmit()}),o(5,"mat-form-field",4)(6,"mat-label"),m(7,"Correo electr\xF3nico"),r(),g(8,"input",5),r(),o(9,"button",6),m(10," Ingresar "),r()()()()),t&2&&(s(4),u("formGroup",i.form),s(5),u("disabled",i.form.invalid))},dependencies:[b,E,C,y,F,x,I,w,_,j,N,G,k,R,L]})}}return a})();export{Z as LoginPage};
